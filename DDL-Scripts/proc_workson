
DROP PROCEDURE IF EXISTS insert_WorksOn;

DELIMITER $

CREATE PROCEDURE insert_WorksOn (IN r_id INT UNSIGNED, IN p_id INT UNSIGNED) 

BEGIN
	DECLARE r_a VARCHAR(15);
    DECLARE p_a VARCHAR(15);
    SELECT abbreviation INTO r_a FROM researcher where researcher_id = r_id;
    SELECT abbreviation INTO p_a FROM project where project_id = p_id;
    if (r_a = p_a) then
	INSERT INTO WorksOn (researcher_id, project_id) VALUES (r_id, p_id);
	END IF ;
END$
DELIMITER ;


DROP PROCEDURE IF EXISTS update_WorksOn;

DELIMITER $

CREATE PROCEDURE update_WorksOn (IN r_id INT UNSIGNED, IN p_id INT UNSIGNED) 

BEGIN
	DECLARE r_a VARCHAR(15);
    DECLARE p_a VARCHAR(15);
    SELECT abbreviation INTO r_a FROM researcher where researcher_id = r_id;
    SELECT abbreviation INTO p_a FROM project where project_id = p_id;
    if (r_a = p_a) then
	UPDATE WorksOn SET project_id = p_id where researcher_id = r_id;
	END IF ;
END$
DELIMITER ;
